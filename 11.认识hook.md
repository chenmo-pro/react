## 11.认识hook

### 1.什么是hook

钩子函数，可以将react中的状态勾到function组件中

### 2.hook有什么用

使function 组件拥有class组件的状态和生命周期

### 3.hook如何使用

```js
import React,{useEffect,useState} from 'react';
//调用useEffect和useState方法

//useEffect语法
useEffect(代码块儿()=>{},[依赖项])
如果依赖项数组里的值发生改变，则会重新执行渲染代码块中的内容
默认一直渲染执行

//useState语法
useState(值,对象)
useState(0);
useState(new Date());
```

### 4.例子

![image-20210125181623751](https://gitee.com/chenmo97/react/raw/master/img/20210125181633.png)

#### 4.1 按钮计数

```js
import React, { useEffect, useState } from "react";
import ReactDOM from "react-dom";
// 1.按钮计数
 export default function HookPage(props){
//     //初始化
     let [count,setCount] = useState(0);
     return(
         <div>
             <h3>HookPage</h3>
             <p>{count}</p>
             <button onClick={()=>{setCount(count+1)}}>add</button>
         </div>
     )
 }

// //为什么不能用 count=count+1
```

#### 4.2 定时器

```js
//2.定时器
import React, { useEffect, useState } from "react";
import ReactDOM from "react-dom";
export default function HookPage(props){
    const [date,setDate] = useState(new Date());
    useEffect(()=>{
        const timer = setInterval(()=>{setDate(new Date())}
                ,1000);
        console.log("Effect");
    },[]);
    //没大写Locale报错
    return(
        <div>
            <p>{date.toLocaleTimeString()}</p>
            
        </div>
    )
}
```

#### 4.3 去除负面影响

```js
import React, { useEffect, useState } from "react";
import ReactDOM from "react-dom";

export default function HookPage(props){
    const [count,setCount] = useState(0);
    const [date,setDate] = useState(new Date());
    useEffect(()=>{
        const timer = setInterval(()=>{setDate(new Date())}
                ,1000);
        console.log("Date Effect");
        //清除副作用
        return ()=>clearInterval(timer)
    },[]);
    useEffect(()=>{
        document.title = `点击${count}次`;
        console.log("User Effect");
    },[count]);
    //没大写Locale报错
    //绑定事件要使用函数
    return(
        <div>
            <p>{date.toLocaleTimeString()}</p>
            <p>{count}</p>
            <button onClick={()=>setCount(count+1)}>add</button>
        </div>
    )
}

ReactDOM.render(
    <HookPage />,
    document.getElementById('root')
)
```

