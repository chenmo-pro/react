### 1. setState 的使用

语法

### 2. 不可以直接改变state

有状态和声明周期

继承component

实现render方法

```js
class Clock extends React.Component{
  constructor(props){
    super(props);
    this.state = {
      date:new Date()
    }
  }
  componentDidMount(){
    this.timer = setInterval(() => {
          this.setState({
            date: new Date()
          })
        }, 1000);
  }
  componentWillUnmount(){
    clearInterval(this.timer)
  }
  render(){
    const {date} = this.state;
    return(
    <div>
      <h1>class组件</h1>
      <h6>{date.toLocaleTimeString()}</h6>
    </div>)
  }
}

function ClockPro(props){
  const [date,setDate] = useState(new Date());
  useEffect(
    () => {
      const timer = setInterval(
        () => {
          setDate(new Date())
        },
        1000
      );
      return () => clearInterval(timer);
    },
    []
  );
  return(
    <div>{date.toLocaleTimeString()}</div>
  )
}
```



### 3. setState可能是异步的

无状态和声明周期

仅关注内容展示

react 16.8引入hooks，组件也能拥有状态

返回渲染结果

```js
import React {useState,useEffect} from 'react';
function FunctionComponent(props) {
  const [date, setDate] = useState(new Date());
  //useState用法 const[state,setState] = useState(init); 输入state和setstate 初始化state
  //setState用法 setState(newState) 新的state更新以及函数时更新的区别
  //useEffect用法 可以看作是 rander以后执行副作用,后面加[]则不会在更新时继续执行
  useEffect(() => {//副作⽤
  const timer = setInterval(() => {
  setDate(new Date());
  }, 1000);
  return () => clearInterval(timer);//组件卸载的时候执⾏
  }, []);
  return (
  <div>
  <h3>FunctionComponent</h3>
  <p>{date.toLocaleTimeString()}</p>
  </div>
  );
 }
```

### 4.  setState 的合并更新